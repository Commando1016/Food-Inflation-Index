<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selected Countries</title>
</head>
<body>
    <h1>Selected Countries</h1>
    <p>The following countries were selected:</p>
    <ul>
        {% for country in countries %}
        <li>{{ country }}</li>
        {% endfor %}
    </ul>
    <a href="/">Back to Selection</a>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selected Data</title>
</head>
<body>
    <h1>Selected Data</h1>
    <table border="1">
        <thead>
            <tr>
                <th>Country Code</th>
                <th>Country</th> -->
                <!-- Add headers for other columns if needed -->
                <!-- For example: <th>Year 2018</th> -->
            <!-- </tr>
        </thead>
        <tbody>
            {% for index, row in filtered_data.iterrows() %}
            <tr>
                <td>{{ row['Country Code'] }}</td>
                <td>{{ row['Country'] }}</td> -->
                <!-- Add cells for other columns if needed -->
                <!-- For example: <td>{{ row['2018'] }}</td> -->
            <!-- </tr>
            {% endfor %}
        </tbody>
    </table>
    <a href="/">Back to Selection</a>
</body>
</html> -->

 <!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Inflation Data</title>
     <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
 </head>
 <body>
     <h1>Inflation Data</h1>
     <div id="plot"></div>
     <!-- <script>
        var data = {{ filtered_data }};
        console.log(data)
        var traces = [];
        
        // Loop through each country's data
        for (var i = 0; i < data.length; i++) {
            var countryData = data[i];
            console.log(countryData)
            // Extract country name, average inflation, and inflation data
            var countryName = countryData['Country'];
            var averageInflation = countryData['Average Inflation'];
            var inflationData = countryData['Inflation'];
            var years = JSON.parse('{{ years | safe | tojson | safe }}');
            
            // Ensure the length of years matches the length of inflation data
            if (years.length === inflationData.length) {
                // Create trace for the country's inflation data
                var trace = {
                    x: years,
                    y: inflationData,
                    mode: 'lines',
                    name: countryName + ': ' + averageInflation + '%'
                };
                
                // Add trace to traces array
                traces.push(trace);
            } else {
                console.error('Length mismatch for country: ' + countryName);
            }
        } -->
        
        <script>
            var data = {{ filtered_data | safe }};
            var years = {{ years | tojson | safe }};
            console.log(data);
            console.log(years);
        
            // Loop through each country's data
            for (var i = 0; i < data.length; i++) {
                var countryData = data[i];
                
                // Extract country name, average inflation, and inflation data
                var countryName = countryData[1];  // Assuming the country name is the second element
                var averageInflation = countryData[2];  // Assuming the average inflation is the third element
                var inflationData = countryData.slice(3);  // Assuming inflation data starts from the fourth element
                
                // Ensure the length of years matches the length of inflation data
                if (years.length === inflationData.length) {
                    // Create trace for the country's inflation data
                    var trace = {
                        x: years,
                        y: inflationData,
                        mode: 'lines',
                        name: countryName + ': ' + averageInflation + '%'
                    };
                    
                    // Add trace to traces array
                    traces.push(trace);
                } else {
                    console.error('Length mismatch for country: ' + countryName);
                }
            }

        // Define layout for the plot
        var layout = {
            title: 'Inflation Data',
            xaxis: { title: 'Year' },
            yaxis: { title: 'Inflation (%)' },
            legend: { x: 1.05, y: 1 } // Position legend outside the plot on the top right
        };
        
        // Generate plot using Plotly.js
        Plotly.newPlot('plot', traces, layout);
//     </script>    
</body>
</html>
 

